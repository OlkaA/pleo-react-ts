(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,t,a){},31:function(e,t,a){e.exports=a(51)},36:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),s=(a(36),a(10)),o=a(14),i=a(19),u=a(13),m=a(29),p={expenses:[],total:0},h=Object(u.c)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_EXPENSES":return t.payload;default:return e}}}),E=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,d=Object(u.e)(h,E(Object(u.a)(m.a))),f=a(2),v=a(3),g=a(5),x=a(4);a(41);var b=function(){return r.a.createElement("nav",null,r.a.createElement(s.b,{to:"/expenses"},"Expenses"),r.a.createElement(s.b,{to:"/about"},"About"))},y=(a(43),function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"column home-page-wrapper"},r.a.createElement("div",{className:"home-page"},r.a.createElement(b,null),r.a.createElement("h1",{className:"home-page-title"},"Best way to deal with your expenses.")))}}]),a}(n.Component)),O=a(6),j=a.n(O),C=a(11),w=function(e,t){return{type:"FETCH_EXPENSES",payload:{expenses:e,total:t}}},N=function(e){return function(){var t=Object(C.a)(j.a.mark((function t(a,n){var r,c,l;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 25,r=void 0===e?0:25*e,t.next=4,fetch("/expenses?limit=".concat(25,"&offset=").concat(r));case 4:return c=t.sent,t.next=7,c.json();case 7:l=t.sent,a(w(l.expenses,l.total));case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},k=(a(27),a(21)),S=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this.props.data,t=e.id,a=e.merchant,n=k(this.props.data.date).format("L"),c="".concat(this.props.data.amount.value," ").concat(this.props.data.amount.currency),l="".concat(this.props.data.user.first," ").concat(this.props.data.user.last),o=this.props.data.receipts.length||"-",i=this.props.data.comment||"-";return r.a.createElement("tr",null,r.a.createElement("td",{"data-title":"Amount"},c),r.a.createElement("td",{"data-title":"Date"},n),r.a.createElement("td",{"data-title":"Merchant"},a),r.a.createElement("td",{"data-title":"User"},l),r.a.createElement("td",{"data-title":"Receipts"},o),r.a.createElement("td",{"data-title":"Comment"},i),r.a.createElement("td",null,r.a.createElement(s.b,{to:{pathname:"/expenses/".concat(t)}}," ","See more"," ")))}}]),a}(n.Component);a(46);var P=function(e){return r.a.createElement("button",{onClick:e.onClick},e.value)},I=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).goToNextPage=function(){if(n.state.currentIndex+1!==n.state.pages){var e=n.state.currentIndex+1;n.setState({currentIndex:e},(function(){return n.props.goToPage(n.state.currentIndex)}))}},n.goToPrevPage=function(){if(0!==n.state.currentIndex){var e=n.state.currentIndex-1;n.setState({currentIndex:e},(function(){return n.props.goToPage(n.state.currentIndex)}))}},n.state={currentIndex:0,pages:0},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.setState({pages:Math.ceil(this.props.numberOfItems/25)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"pagination"},r.a.createElement(P,{onClick:this.goToPrevPage,value:"<"}),r.a.createElement("span",null,"".concat(this.state.currentIndex+1," of ").concat(this.state.pages)),r.a.createElement(P,{onClick:this.goToNextPage,value:">"}))}}]),a}(n.Component),A=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"list-of-expenses"},r.a.createElement("table",{className:"list"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Merchant ",r.a.createElement(P,{onClick:function(){return e.props.sortList("merchant")},value:"\u2195"})),r.a.createElement("th",null,"User ",r.a.createElement(P,{onClick:function(){return e.props.sortList("user")},value:"\u2195"})),r.a.createElement("th",null,"Receipts"),r.a.createElement("th",null,"Comments"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.props.message?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7},this.props.message)):this.props.expenses.map((function(e){return r.a.createElement(S,{key:e.id,data:e})}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7},this.props.total?r.a.createElement(I,{numberOfItems:this.props.total,goToPage:function(t){return e.props.goToPage(t)}}):null)))))}}]),a}(r.a.Component);a(47);var B=function(e){return r.a.createElement("label",{className:"filter-field"},e.label,":",r.a.createElement("input",{type:e.type,onChange:e.onChange,value:e.value}))},T=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onsearchByNameChange=function(e){n.setState({searchByName:e.target.value},(function(){return n.props.onFilterChange(n.state)}))},n.onsearchByPlace=function(e){n.setState({searchByPlace:e.target.value},(function(){return n.props.onFilterChange(n.state)}))},n.state={searchByName:"",searchByPlace:""},n}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{type:"text",onChange:this.onsearchByNameChange,value:this.state.searchByName,label:"Search by name"}),r.a.createElement(B,{type:"text",onChange:this.onsearchByPlace,value:this.state.searchByPlace,label:"Search by place"}))}}]),a}(n.Component),F=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={filteredArray:[],isSorted:!1},e.onFilterChange=function(t){var a=e.props.data.expenses.filter((function(e){return!(t.searchByName&&!e.user.first.toLowerCase().includes(t.searchByName.toLowerCase())&&!e.user.last.toLowerCase().includes(t.searchByName.toLowerCase()))&&!(t.searchByPlace&&!e.merchant.toLowerCase().includes(t.searchByPlace.toLowerCase()))}));e.setState({filteredArray:a})},e.sortList=function(t){var a;a=e.state.filteredArray.sort((function(a,n){return e.state.isSorted?(e.setState({isSorted:!1}),"user"!==t?a[t].localeCompare(n[t]):a[t].first.localeCompare(n[t].first)):(e.setState({isSorted:!0}),"user"!==t?n[t].localeCompare(a[t]):n[t].first.localeCompare(a[t].first))})),e.setState({filteredArray:a})},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.fetchExpenses()}},{key:"fetchExpenses",value:function(){var e=Object(C.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0===t?0:t,e.next=3,this.props.startFetchExpenses(a);case 3:this.onFilterChange("");case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.data.total;return r.a.createElement("div",{className:"page"},r.a.createElement(s.b,{className:"go-back-button",to:{pathname:"/"}},"\u2190"),r.a.createElement("h1",null,"List of expenses"),r.a.createElement(T,{onFilterChange:this.onFilterChange}),this.state?r.a.createElement(A,{expenses:this.state.filteredArray,total:t,goToPage:function(t){e.fetchExpenses(t)},sortList:function(t){e.sortList(t)},message:this.state.filteredArray.length>0?"":"No match"}):null)}}]),a}(r.a.Component),L=Object(i.b)((function(e,t){return{data:e.data}}),(function(e,t){return{startFetchExpenses:Object(u.b)(N,e)}}))(F),U=function(e){var t=e.userId,a=e.fetchExpense,n=function(){var e=Object(C.a)(j.a.mark((function e(n){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return(r=new FormData).append("receipt",n.target.files[0]),e.next=5,fetch("/expenses/".concat(t,"/receipts"),{method:"POST",body:r});case 5:return c=e.sent,a(),e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("label",{className:"receipt-label"},r.a.createElement("input",{type:"file",name:"file",title:" ",onChange:n}),"Add receipt")},M=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onCommentChange=function(e){""!==e.target.value.trim()&&n.setState({comment:e.target.value})},n.addComment=Object(C.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.comment||!n.props.userId){e.next=9;break}return e.next=3,fetch("/expenses/".concat(n.props.userId),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:n.state.comment})});case 3:return t=e.sent,n.props.fetchExpense(),n.setState({comment:""}),e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)}))),n.state={comment:""},n}return Object(v.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",placeholder:this.props.placeholder,autoComplete:"off",value:this.state.comment,onChange:this.onCommentChange,onKeyPress:function(t){"Enter"===t.key&&e.addComment()}}),r.a.createElement("button",{className:"add-comment",onClick:this.addComment},this.props.placeholder))}}]),a}(n.Component),D=a(21),_=a.n(D),R=(a(48),function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={id:"",currentExpense:null},e.fetchExpense=function(){var t=Object(C.a)(j.a.mark((function t(a){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/expenses/".concat(a));case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,e.setState({currentExpense:r});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=Object(C.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.match.params.id;case 2:t=e.sent,this.setState({id:t}),this.fetchExpense(this.state.id);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a,n,c,l,o,i,u=this;return this.state.currentExpense&&Object.entries(this.state.currentExpense).length>0&&(e=this.state.currentExpense.merchant,t=_()(this.state.currentExpense.date).format("L"),a="".concat(this.state.currentExpense.amount.value," ").concat(this.state.currentExpense.amount.currency),n="".concat(this.state.currentExpense.user.first," ").concat(this.state.currentExpense.user.last),c=this.state.currentExpense.user.email,l=this.state.currentExpense.receipts,o=this.state.currentExpense.comment||"-",i=this.state.currentExpense.category||"-"),r.a.createElement("div",{className:"page expense-page"},r.a.createElement(s.b,{className:"go-back-button",to:{pathname:"/expenses"}},"\u2190"),r.a.createElement("h1",null,"Expense"),r.a.createElement("div",{className:"expense-info"},r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"Date:"),r.a.createElement("span",null,t)),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"Amount:"),r.a.createElement("span",null,a)),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"Merchant:"),r.a.createElement("span",null,e)),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"User:"),r.a.createElement("span",null,n)),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"User email:"),r.a.createElement("span",null,c)),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"column"},r.a.createElement("span",null,"Receipts:"),r.a.createElement(U,{userId:this.state.id,fetchExpense:function(){return u.fetchExpense(u.state.id)}})," "),l&&l.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"no-data"},1===l.length?"".concat(l.length," receipt"):"".concat(l.length," receipts"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"no-data"},"There are no receipts."))),r.a.createElement("div",{className:"row"},r.a.createElement("span",null,"Category:"),r.a.createElement("span",null,i)),r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"column"},r.a.createElement("span",null,"Comment:"),r.a.createElement(M,{placeholder:"Change comment",userId:this.state.id,fetchExpense:function(){return u.fetchExpense(u.state.id)}})),"-"!==o?r.a.createElement("span",{className:"no-data"},o):r.a.createElement("span",{className:"no-data"},"There are no comment."))))}}]),a}(n.Component)),H=(a(49),function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement("span",{className:"error-text"},"404"),r.a.createElement("h1",{className:"home-page-title"},"Page not found."))}}]),a}(n.Component)),X=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"about-page"},r.a.createElement("h2",null,"Front-end challenge for Pleo"),r.a.createElement("h3",null,r.a.createElement("strong",null,r.a.createElement("i",null,"Implemented a short version of Pleo App."))),r.a.createElement("h3",null,r.a.createElement("strong",null,"Getting started")),r.a.createElement("ul",null,r.a.createElement("li",null,"First clone the repo on your local machine using a terminal or a git client."),r.a.createElement("li",null,"In the folder `api` run `npm install`(it sets packages for backend)."),r.a.createElement("li",null,"In the folder `client` run `npm install`(it sets packages for frontend)."),r.a.createElement("li",null,"In the folder `client` run `npm start` to run project (api will run automatically) to run app in the browser.")),r.a.createElement("h3",null,r.a.createElement("strong",null,"How to use app, functionality")),r.a.createElement("h4",null,"App has several pages:"),r.a.createElement("div",null,"- HomePage has navigation in the top right corner.",r.a.createElement("ul",null,r.a.createElement("li",null,"By clicking on Expenses user will be redirectered to Expenses page with list of all expenses."),r.a.createElement("li",null,"By clicking on About user will be redirectered to About page with short description of the project."))),r.a.createElement("div",null,"- ExpensesPage",r.a.createElement("ul",null,r.a.createElement("li",null,"User can see list of expenses."),r.a.createElement("li",null,"User can navigate to next/previous page to see next part of list of expenses."),r.a.createElement("li",null,"User can filter on expenses (client side filters) by name of the user or/and by merchant."),r.a.createElement("li",null,"User can sort expenses by first name of user or by Merchant."),r.a.createElement("li",null,"User can click on the button `See more` to see detailed information about specific expense."))),r.a.createElement("div",null,"- ExpensePage",r.a.createElement("ul",null,r.a.createElement("li",null,"User can see detailed information about specific exspense."),r.a.createElement("li",null,"User can add a comment on an expense."),r.a.createElement("li",null,"User can add a receipt image on an expense."))),r.a.createElement("div",null,"- AboutPage User can see a short description of the project."),r.a.createElement("div",null," - ErrorPage If user enters non-existing url, Error page will appear."),r.a.createElement("h3",null,r.a.createElement("strong",null,"Used technologies")),r.a.createElement("ul",null,r.a.createElement("li",null,"A single page application using React."),r.a.createElement("li",null,"CSS has written SASS language."),r.a.createElement("li",null,"Responsive design."),r.a.createElement("li",null,"Implemented with a state management library Redux."),r.a.createElement("li",null,"Implemented in TypeScript.")),r.a.createElement("h3",null,r.a.createElement("strong",null,r.a.createElement("i",null,"Author: Olha Afanasieva")))))}}]),a}(n.Component),J=(a(50),function(){return r.a.createElement(i.a,{store:d},r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:y}),r.a.createElement(o.a,{exact:!0,path:"/about",component:X}),r.a.createElement(o.a,{exact:!0,path:"/expenses",component:L}),r.a.createElement(o.a,{exact:!0,path:"/expenses/:id",component:R}),r.a.createElement(o.a,{exact:!0,path:"/*",component:H})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.090d4577.chunk.js.map